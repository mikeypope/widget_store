{% extends 'store/base.html' %}
{% block content %}
{% load static %}
<title>{{ product.name }} - {{ product.manufacturer }} | Widgets Inc.</title>
<meta name="description" content="{{ product.description|truncatewords:20 }}">

<br><br><br><br>

<div class="row">
    <div class="col-md-6">
        <h1>{{ product.name }}</h1>
        {% if product.image %}
            <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }} by {{ product.manufacturer }}">
        {% else %}
            <img src="{% static 'images/logo.jpeg' %}" class="card-img-top" alt="No image available">
        {% endif %}
    </div>
    <div class="col-md-6">
        <h2>SKU: {{ product.sku }}</h2>
        <p>Manufacturer: <a href="{% url 'category' product.category.slug %}">{{ product.manufacturer }}</a> | {{ product.category }}</p>
        <p>{{ product.description }}</p>
        {% if product.price %}
            <p>${{ product.price }}</p>
        {% else %}
            <p>Call for pricing</p>
        {% endif %}
        
        {% if product.price %}
        <!-- Add to Cart Form -->
        <form method="post" action="{% url 'add_to_cart' product.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-success">Add to Cart</button>
        </form>
        {% endif %}
        
        <!-- Social Sharing Buttons -->
        <div>
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank">Share on Facebook</a>
            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank">Share on Twitter</a>
        </div>
        
    </div>
</div>

<!-- Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Product",
  "name": "{{ product.name }}",
  "image": "{% if product.image %}{{ product.image.url }}{% else %}{% static 'images/logo.jpeg' %}{% endif %}",
  "description": "{{ product.description }}",
  "sku": "{{ product.sku }}",
  "brand": {
    "@type": "Brand",
    "name": "{{ product.manufacturer }}"
  },
  {% if product.price %}
  "offers": {
    "@type": "Offer",
    "price": "{{ product.price }}",
    "priceCurrency": "USD",
    "availability": "http://schema.org/InStock"
  }
  {% else %}
  "offers": {
    "@type": "Offer",
    "availability": "http://schema.org/OutOfStock"
  }
  {% endif %}
}
</script>

{% endblock %}
